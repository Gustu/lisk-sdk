{
	"title": "Invalid block processing",
	"summary": "An invalid block with transfers valid on their own but second transfer would not have enough funds after fee is applied",
	"config": "mainnet",
	"runner": "block_processing_transfers",
	"handler": "invalid_block_processing_not_enough_balance_for_second_transaction",
	"testCases": {
		"initialState": {
			"chain": [
				{
					"version": 1,
					"totalAmount": "5000000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 10,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"previousBlock": "16035521652507125836",
					"generatorPublicKey": "961cba94ea053793b965e97a208abbce8d98711bb993c03dde7901262b44272b",
					"transactions": [
						{
							"id": "3209874206906757783",
							"amount": "5000000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "6f1195160a7f0d8a33883feafe567e79552d30f9e6d23a99676ebc04c15c95c5",
							"senderId": "2580432900309532760L",
							"recipientId": "4779466276403361478L",
							"fee": "10000000",
							"signature": "1986951ef5b03d3bc3623c64a780854ebf5ad9e928eed2c84552fd31ed6a12fcb5ad13bf43cc2a9d46025d26fe52cc8e9c7a28256449ceab4f19edb800e2c80f",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "97b25da495c38b2c3799d7339a942a3e58fa6f7d29589ca719a267e30925a04f",
					"blockSignature": "bd3fdb4f07e0e205d5a54b66c0fd0a9af903259b56cb70f9704c2793aaa613c9cc64f810f8a67e4742547e257dcbaf30d7f8e457770439635bb1775cda1c7606",
					"height": 2
				}
			],
			"accounts": [
				{
					"address": "2580432900309532760L",
					"publicKey": "6f1195160a7f0d8a33883feafe567e79552d30f9e6d23a99676ebc04c15c95c5",
					"balance": "1000000000000",
					"secondSignature": 0,
					"isDelegate": 0,
					"vote": "0",
					"multimin": 0,
					"multilifetime": 0,
					"nameexist": 0,
					"producedBlocks": 0,
					"missedBlocks": 0,
					"fees": "0",
					"rewards": "0",
					"asset": {},
					"voteWeight": "0"
				},
				{
					"username": "genesis_100",
					"isDelegate": 1,
					"secondSignature": 0,
					"address": "4779466276403361478L",
					"publicKey": "961cba94ea053793b965e97a208abbce8d98711bb993c03dde7901262b44272b",
					"balance": "0",
					"vote": "0",
					"multimin": 0,
					"multilifetime": 0,
					"nameexist": 0,
					"producedBlocks": 0,
					"missedBlocks": 0,
					"fees": "0",
					"rewards": "0",
					"asset": {},
					"voteWeight": "1000000000000"
				}
			]
		},
		"input": [
			{
				"version": 1,
				"totalAmount": "100000000",
				"totalFee": "20000000",
				"reward": "0",
				"timestamp": 30,
				"numberOfTransactions": 2,
				"payloadLength": 234,
				"generatorPublicKey": "961cba94ea053793b965e97a208abbce8d98711bb993c03dde7901262b44272b",
				"transactions": [
					{
						"id": "15155554403164892272",
						"amount": "50000000",
						"type": 0,
						"timestamp": 102702700,
						"senderPublicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
						"senderId": "2222471382442610527L",
						"recipientId": "4779466276403361478L",
						"fee": "10000000",
						"signature": "04ade4d3280e73c8ef4cfd27a13b2677b6d7a3d7a8ae17062fa5b0140189c1ac06a6db2c1def00a79fb99d073eadb06458dff78370aca7cc17abe333872ceb08",
						"signatures": [],
						"asset": {}
					},
					{
						"id": "4506081586426918539",
						"amount": "50000000",
						"type": 0,
						"timestamp": 102702700,
						"senderPublicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
						"senderId": "2222471382442610527L",
						"recipientId": "11325618463998518034L",
						"fee": "10000000",
						"signature": "4f226b94790c952e274e3a957b31ddf0c88359be72709dda50349002690f6ac73101fe9425788647a9592d74371bded2ae464266a5f358d8dda7a2d159b3450d",
						"signatures": [],
						"asset": {}
					}
				],
				"payloadHash": "13bea9d91b07bd504de24f5b016d921c01ce4f8fad417e415cc7684a5c5f0aed",
				"blockSignature": "362dad417041a17a476fba635be8b9b384d3307f5fa32527a7a8d22477cf01d7242ab1b66273cca9d2c84eb6938fd3fe08aee704e5ae2a80bbd68680e0c5bc05",
				"height": 4
			}
		],
		"output": {
			"chain": [
				{
					"version": 1,
					"totalAmount": "5000000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 10,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"previousBlock": "16035521652507125836",
					"generatorPublicKey": "961cba94ea053793b965e97a208abbce8d98711bb993c03dde7901262b44272b",
					"transactions": [
						{
							"id": "3209874206906757783",
							"amount": "5000000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "6f1195160a7f0d8a33883feafe567e79552d30f9e6d23a99676ebc04c15c95c5",
							"senderId": "2580432900309532760L",
							"recipientId": "4779466276403361478L",
							"fee": "10000000",
							"signature": "1986951ef5b03d3bc3623c64a780854ebf5ad9e928eed2c84552fd31ed6a12fcb5ad13bf43cc2a9d46025d26fe52cc8e9c7a28256449ceab4f19edb800e2c80f",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "97b25da495c38b2c3799d7339a942a3e58fa6f7d29589ca719a267e30925a04f",
					"blockSignature": "bd3fdb4f07e0e205d5a54b66c0fd0a9af903259b56cb70f9704c2793aaa613c9cc64f810f8a67e4742547e257dcbaf30d7f8e457770439635bb1775cda1c7606",
					"height": 2
				},
				{
					"version": 1,
					"totalAmount": "100000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 20,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"generatorPublicKey": "961cba94ea053793b965e97a208abbce8d98711bb993c03dde7901262b44272b",
					"transactions": [
						{
							"id": "10292931784620358778",
							"amount": "100000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "961cba94ea053793b965e97a208abbce8d98711bb993c03dde7901262b44272b",
							"senderId": "4779466276403361478L",
							"recipientId": "2222471382442610527L",
							"fee": "10000000",
							"signature": "168e6838af74db4692947f9ebb6305a2f1be10623ab22ee9178945df2bb00a5e1558c33e013ae1fa4a48a5eac88c9f3f8aa182b02fbfbb94529b35a27a4ae50e",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "7abc9f7fecd6d78efc4008402f391b6847049daa4b6ffbe33c7d495149ca36ee",
					"blockSignature": "50bcf6c493ba33a8874a119e7f0819b125acd4f601f568d4c392762f4c1dc59ef3fb3bd4f5b5b6a0565541a363f20798bb5e67732013c0472c52c0c083b5e103",
					"height": 3
				}
			],
			"accounts": [
				[
					{
						"address": "2580432900309532760L",
						"publicKey": "6f1195160a7f0d8a33883feafe567e79552d30f9e6d23a99676ebc04c15c95c5",
						"balance": "994990000000",
						"secondSignature": 0,
						"isDelegate": 0,
						"vote": "0",
						"multimin": 0,
						"multilifetime": 0,
						"nameexist": 0,
						"producedBlocks": 0,
						"missedBlocks": 0,
						"fees": "0",
						"rewards": "0",
						"asset": {},
						"voteWeight": "0"
					},
					{
						"username": "genesis_100",
						"isDelegate": 1,
						"secondSignature": 0,
						"address": "4779466276403361478L",
						"publicKey": "961cba94ea053793b965e97a208abbce8d98711bb993c03dde7901262b44272b",
						"balance": "4890000000",
						"vote": "0",
						"multimin": 0,
						"multilifetime": 0,
						"nameexist": 0,
						"producedBlocks": 0,
						"missedBlocks": 0,
						"fees": "0",
						"rewards": "0",
						"asset": {},
						"voteWeight": "1000000000000"
					},
					{
						"address": "2222471382442610527L",
						"publicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
						"secondPublicKey": null,
						"username": "",
						"isDelegate": false,
						"secondSignature": false,
						"balance": "100000000",
						"multiMin": 0,
						"multiLifetime": 0,
						"nameExist": false,
						"missedBlocks": 0,
						"producedBlocks": 0,
						"rank": 0,
						"fees": 0,
						"rewards": 0,
						"vote": 0,
						"productivity": 0
					}
				]
			]
		}
	}
}
