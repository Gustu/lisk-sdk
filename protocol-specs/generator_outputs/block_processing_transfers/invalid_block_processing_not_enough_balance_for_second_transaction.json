{
	"title": "Invalid block processing",
	"summary": "An invalid block with transfers valid on their own but second transfer would not have enough funds after fee is applied",
	"config": "mainnet",
	"runner": "block_processing_transfers",
	"handler": "invalid_block_processing_not_enough_balance_for_second_transaction",
	"testCases": {
		"initialState": {
			"chain": [
				{
					"version": 1,
					"totalAmount": "5000000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 10,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"previousBlock": "14267700672246591925",
					"generatorPublicKey": "6fdfafcd8206c179d351baac5dc104a5ff46453e9d7f27f3e28ef38fc93d7799",
					"transactions": [
						{
							"id": "12484031046568235430",
							"amount": "5000000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "d13a2659f908146f099da29216a18fd7f845b4e1455087b1a4bced79b6fefadf",
							"senderId": "11036225455433466506L",
							"recipientId": "7917418729031818208L",
							"fee": "10000000",
							"signature": "6f6d6496aeb948d281f18504bac8c78dea8b79ea2a050de40164fa8cd51ac9e6a9845336c37f784f7e2f45da1105fea8febabc7e225152cd62876d255f09e20f",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "a6d1a5f7173040ad84a5f6a2477fa917c9d2312044b73db487c2743b15f35444",
					"blockSignature": "16751598e5788b909ea4e9daf10035937a04bb25e7733286d9ad04b260da726480f49252d644271bf4dc047570527caafc85c7362fd9e346f88f8323f1cda202",
					"height": 2
				}
			],
			"accounts": [
				{
					"address": "11036225455433466506L",
					"publicKey": "d13a2659f908146f099da29216a18fd7f845b4e1455087b1a4bced79b6fefadf",
					"balance": "1000000000000",
					"secondSignature": 0,
					"isDelegate": 0,
					"vote": "0",
					"multimin": 0,
					"multilifetime": 0,
					"nameexist": 0,
					"producedBlocks": 0,
					"missedBlocks": 0,
					"fees": "0",
					"rewards": "0",
					"asset": {},
					"voteWeight": "0"
				},
				{
					"username": "genesis_100",
					"isDelegate": 1,
					"secondSignature": 0,
					"address": "7917418729031818208L",
					"publicKey": "6fdfafcd8206c179d351baac5dc104a5ff46453e9d7f27f3e28ef38fc93d7799",
					"balance": "0",
					"vote": "0",
					"multimin": 0,
					"multilifetime": 0,
					"nameexist": 0,
					"producedBlocks": 0,
					"missedBlocks": 0,
					"fees": "0",
					"rewards": "0",
					"asset": {},
					"voteWeight": "1000000000000"
				}
			]
		},
		"input": [
			{
				"version": 1,
				"totalAmount": "100000000",
				"totalFee": "20000000",
				"reward": "0",
				"timestamp": 30,
				"numberOfTransactions": 2,
				"payloadLength": 234,
				"generatorPublicKey": "6fdfafcd8206c179d351baac5dc104a5ff46453e9d7f27f3e28ef38fc93d7799",
				"transactions": [
					{
						"id": "645112873243195934",
						"amount": "50000000",
						"type": 0,
						"timestamp": 102702700,
						"senderPublicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
						"senderId": "2222471382442610527L",
						"recipientId": "7917418729031818208L",
						"fee": "10000000",
						"signature": "aa1525297e6562fe76cb0f9716c7bbbfb47b47ea21f177c6bb402234200db3689d1562ac4aa887b9f7aa060d7e4232639deabf00c4d5528ebe5442eb0cb98606",
						"signatures": [],
						"asset": {}
					},
					{
						"id": "4506081586426918539",
						"amount": "50000000",
						"type": 0,
						"timestamp": 102702700,
						"senderPublicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
						"senderId": "2222471382442610527L",
						"recipientId": "11325618463998518034L",
						"fee": "10000000",
						"signature": "4f226b94790c952e274e3a957b31ddf0c88359be72709dda50349002690f6ac73101fe9425788647a9592d74371bded2ae464266a5f358d8dda7a2d159b3450d",
						"signatures": [],
						"asset": {}
					}
				],
				"payloadHash": "a2aa4e20d5340fa2b9593ba69c089c8a6c027f99b7c9f5c03faed927286e4c3e",
				"blockSignature": "ceb843f99fc43e4a67f31ba04a47b913491a6d0a210de1c2ec2e8d6c69a0ef5d6467c3116d67107dfbfda49cd3a62d0914b599fa2feb7c5063324d3b59ce480e",
				"height": 4
			}
		],
		"output": {
			"chain": [
				{
					"version": 1,
					"totalAmount": "5000000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 10,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"previousBlock": "14267700672246591925",
					"generatorPublicKey": "6fdfafcd8206c179d351baac5dc104a5ff46453e9d7f27f3e28ef38fc93d7799",
					"transactions": [
						{
							"id": "12484031046568235430",
							"amount": "5000000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "d13a2659f908146f099da29216a18fd7f845b4e1455087b1a4bced79b6fefadf",
							"senderId": "11036225455433466506L",
							"recipientId": "7917418729031818208L",
							"fee": "10000000",
							"signature": "6f6d6496aeb948d281f18504bac8c78dea8b79ea2a050de40164fa8cd51ac9e6a9845336c37f784f7e2f45da1105fea8febabc7e225152cd62876d255f09e20f",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "a6d1a5f7173040ad84a5f6a2477fa917c9d2312044b73db487c2743b15f35444",
					"blockSignature": "16751598e5788b909ea4e9daf10035937a04bb25e7733286d9ad04b260da726480f49252d644271bf4dc047570527caafc85c7362fd9e346f88f8323f1cda202",
					"height": 2
				},
				{
					"version": 1,
					"totalAmount": "100000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 20,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"generatorPublicKey": "6fdfafcd8206c179d351baac5dc104a5ff46453e9d7f27f3e28ef38fc93d7799",
					"transactions": [
						{
							"id": "14344527082548327477",
							"amount": "100000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "6fdfafcd8206c179d351baac5dc104a5ff46453e9d7f27f3e28ef38fc93d7799",
							"senderId": "7917418729031818208L",
							"recipientId": "2222471382442610527L",
							"fee": "10000000",
							"signature": "2a75cd3f142f663e352bc7a2d0ee943fea2660ff25a911a1a55135eaa0076539ef1dbe00728eab0d2b60c22c8b23e6b46d49c64ce39e9732f5853b5dccc5a803",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "3574438a61ff11c70bebe44bb569a1bebbde6dd21d1f954956e55a029e317140",
					"blockSignature": "dee6d68a1d1f159b61c066929a11a19c9aa0fae01ff26aaf5badadb564beb8d4c8a4f27d834a741de5e83762aef5412e33b9e17186a273d2455d38dd7785d206",
					"height": 3
				}
			],
			"accounts": [
				[
					{
						"address": "11036225455433466506L",
						"publicKey": "d13a2659f908146f099da29216a18fd7f845b4e1455087b1a4bced79b6fefadf",
						"balance": "994990000000",
						"secondSignature": 0,
						"isDelegate": 0,
						"vote": "0",
						"multimin": 0,
						"multilifetime": 0,
						"nameexist": 0,
						"producedBlocks": 0,
						"missedBlocks": 0,
						"fees": "0",
						"rewards": "0",
						"asset": {},
						"voteWeight": "0"
					},
					{
						"username": "genesis_100",
						"isDelegate": 1,
						"secondSignature": 0,
						"address": "7917418729031818208L",
						"publicKey": "6fdfafcd8206c179d351baac5dc104a5ff46453e9d7f27f3e28ef38fc93d7799",
						"balance": "4890000000",
						"vote": "0",
						"multimin": 0,
						"multilifetime": 0,
						"nameexist": 0,
						"producedBlocks": 0,
						"missedBlocks": 0,
						"fees": "0",
						"rewards": "0",
						"asset": {},
						"voteWeight": "1000000000000"
					},
					{
						"address": "2222471382442610527L",
						"publicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
						"secondPublicKey": null,
						"username": "",
						"isDelegate": false,
						"secondSignature": false,
						"balance": "100000000",
						"multiMin": 0,
						"multiLifetime": 0,
						"nameExist": false,
						"missedBlocks": 0,
						"producedBlocks": 0,
						"rank": 0,
						"fees": 0,
						"rewards": 0,
						"vote": 0,
						"productivity": 0
					}
				]
			]
		}
	}
}
