{
	"title": "Invalid block processing",
	"summary": "An invalid block with a second delegate registration",
	"config": "mainnet",
	"runner": "block_processing_delegate",
	"handler": "invalid_block_processing_second_delegate_registration_tx",
	"testCases": {
		"initialState": {
			"chain": [
				{
					"version": 1,
					"totalAmount": "5000000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 10,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"previousBlock": "3110763447174287315",
					"generatorPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
					"transactions": [
						{
							"id": "1161712199270033465",
							"amount": "5000000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "0b3dc5a506e312bac462afc4fb34cdc3b19d1976a279930d15ae3c3516edd188",
							"senderId": "12451387766827060593L",
							"recipientId": "4103804705971278554L",
							"fee": "10000000",
							"signature": "b0077842937532dc90adc3d334a7826d7f362532cc72967586e5b422e8cc715b905db441cfbd61dad0b5cd2addf3d2002c1f4bfd21e17cc6d4bf560a93fbeb0c",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "3968ba18173b1f10d6f90a7ec4326dff7c615ebb59f80c51c707ac1c52742fa7",
					"blockSignature": "03de50268603c691ed666f53df7ae1810b4b2227c3267ddc50417e34cce9daf6e81f49a7612b59429482bf4da9b8ab3fb639b37e6b4cd6c7d064c3ee1c322c09",
					"height": 2
				},
				{
					"version": 1,
					"totalAmount": "3000000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 20,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"generatorPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
					"transactions": [
						{
							"id": "5751447885542713980",
							"amount": "3000000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
							"senderId": "4103804705971278554L",
							"recipientId": "2222471382442610527L",
							"fee": "10000000",
							"signature": "4c4509f37547fce298029dbcc8f746415b1bfc2521bd18d3d30c310a2696c28167faec91ea22a24dbb9d7f9487efdb991691bd9dc86697f8040831cf40b74503",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "7ceaf121613fd14f0ebb06586c3ecf1d5c87ba6ae939dfb90c2ba84a1de97da0",
					"blockSignature": "9ac68fd63522e02fbbbc5f65ea8fd30c1b933958858cbad3b634183c033209f996753ed0a9cea51de68e768b991887c134de46b1f22fb1df0c12e7b27f689506",
					"height": 3
				},
				{
					"version": 1,
					"totalAmount": "0",
					"totalFee": "2500000000",
					"reward": "0",
					"timestamp": 30,
					"numberOfTransactions": 1,
					"payloadLength": 126,
					"generatorPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
					"transactions": [
						{
							"id": "11647106216964730883",
							"amount": "0",
							"type": 2,
							"timestamp": 102702700,
							"senderPublicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
							"senderId": "2222471382442610527L",
							"recipientId": "",
							"fee": "2500000000",
							"signature": "60ec00781fa3c560346258efdc63bb6131a7df19676e6d618206d00ca78325856fbe82abce1243ee2fc53b31dad675c278fb42a5a23e6c13e366b4c7c5110607",
							"signatures": [],
							"asset": {
								"delegate": {
									"username": "RadioHead"
								}
							}
						}
					],
					"payloadHash": "03306d3365d5a2a1db15f9590a233012e822eaed20966895f7e9dfde0aa3615b",
					"blockSignature": "611bf0a54880dcf3b3f05b6dfc20df4938213548ef8839216b6ce49138dadcc043ee3f8f911c4882052f3230f001cad1bd0be50ed73960b7006107508b7f5d01",
					"height": 4
				}
			],
			"accounts": [
				{
					"address": "12451387766827060593L",
					"publicKey": "0b3dc5a506e312bac462afc4fb34cdc3b19d1976a279930d15ae3c3516edd188",
					"balance": "10000000000000000",
					"secondSignature": 0,
					"isDelegate": 0,
					"vote": "0",
					"multimin": 0,
					"multilifetime": 0,
					"nameexist": 0,
					"producedBlocks": 0,
					"missedBlocks": 0,
					"fees": "0",
					"rewards": "0",
					"asset": {},
					"voteWeight": "0"
				},
				{
					"username": "genesis_100",
					"isDelegate": 1,
					"secondSignature": 0,
					"address": "4103804705971278554L",
					"publicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
					"balance": "0",
					"vote": "0",
					"multimin": 0,
					"multilifetime": 0,
					"nameexist": 0,
					"producedBlocks": 0,
					"missedBlocks": 0,
					"fees": "0",
					"rewards": "0",
					"asset": {},
					"voteWeight": "10000000000000000"
				}
			]
		},
		"input": [
			{
				"version": 1,
				"totalAmount": "0",
				"totalFee": "2500000000",
				"reward": "0",
				"timestamp": 40,
				"numberOfTransactions": 1,
				"payloadLength": 126,
				"generatorPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
				"transactions": [
					{
						"id": "11647106216964730883",
						"amount": "0",
						"type": 2,
						"timestamp": 102702700,
						"senderPublicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
						"senderId": "2222471382442610527L",
						"recipientId": "",
						"fee": "2500000000",
						"signature": "60ec00781fa3c560346258efdc63bb6131a7df19676e6d618206d00ca78325856fbe82abce1243ee2fc53b31dad675c278fb42a5a23e6c13e366b4c7c5110607",
						"signatures": [],
						"asset": {
							"delegate": {
								"username": "RadioHead"
							}
						}
					}
				],
				"payloadHash": "03306d3365d5a2a1db15f9590a233012e822eaed20966895f7e9dfde0aa3615b",
				"blockSignature": "1e8a15dce86bb20be557ecae008d193258fc53e5ee156aadc646478c29c090dd42290a7583ee6654e5bad8a60387f7c481c005094d430fd1aed4e1435e91a90e",
				"height": 5
			}
		],
		"output": {
			"chain": [
				{
					"version": 1,
					"totalAmount": "5000000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 10,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"previousBlock": "3110763447174287315",
					"generatorPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
					"transactions": [
						{
							"id": "1161712199270033465",
							"amount": "5000000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "0b3dc5a506e312bac462afc4fb34cdc3b19d1976a279930d15ae3c3516edd188",
							"senderId": "12451387766827060593L",
							"recipientId": "4103804705971278554L",
							"fee": "10000000",
							"signature": "b0077842937532dc90adc3d334a7826d7f362532cc72967586e5b422e8cc715b905db441cfbd61dad0b5cd2addf3d2002c1f4bfd21e17cc6d4bf560a93fbeb0c",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "3968ba18173b1f10d6f90a7ec4326dff7c615ebb59f80c51c707ac1c52742fa7",
					"blockSignature": "03de50268603c691ed666f53df7ae1810b4b2227c3267ddc50417e34cce9daf6e81f49a7612b59429482bf4da9b8ab3fb639b37e6b4cd6c7d064c3ee1c322c09",
					"height": 2
				},
				{
					"version": 1,
					"totalAmount": "3000000000",
					"totalFee": "10000000",
					"reward": "0",
					"timestamp": 20,
					"numberOfTransactions": 1,
					"payloadLength": 117,
					"generatorPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
					"transactions": [
						{
							"id": "5751447885542713980",
							"amount": "3000000000",
							"type": 0,
							"timestamp": 102702700,
							"senderPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
							"senderId": "4103804705971278554L",
							"recipientId": "2222471382442610527L",
							"fee": "10000000",
							"signature": "4c4509f37547fce298029dbcc8f746415b1bfc2521bd18d3d30c310a2696c28167faec91ea22a24dbb9d7f9487efdb991691bd9dc86697f8040831cf40b74503",
							"signatures": [],
							"asset": {}
						}
					],
					"payloadHash": "7ceaf121613fd14f0ebb06586c3ecf1d5c87ba6ae939dfb90c2ba84a1de97da0",
					"blockSignature": "9ac68fd63522e02fbbbc5f65ea8fd30c1b933958858cbad3b634183c033209f996753ed0a9cea51de68e768b991887c134de46b1f22fb1df0c12e7b27f689506",
					"height": 3
				},
				{
					"version": 1,
					"totalAmount": "0",
					"totalFee": "2500000000",
					"reward": "0",
					"timestamp": 30,
					"numberOfTransactions": 1,
					"payloadLength": 126,
					"generatorPublicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
					"transactions": [
						{
							"id": "11647106216964730883",
							"amount": "0",
							"type": 2,
							"timestamp": 102702700,
							"senderPublicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
							"senderId": "2222471382442610527L",
							"recipientId": "",
							"fee": "2500000000",
							"signature": "60ec00781fa3c560346258efdc63bb6131a7df19676e6d618206d00ca78325856fbe82abce1243ee2fc53b31dad675c278fb42a5a23e6c13e366b4c7c5110607",
							"signatures": [],
							"asset": {
								"delegate": {
									"username": "RadioHead"
								}
							}
						}
					],
					"payloadHash": "03306d3365d5a2a1db15f9590a233012e822eaed20966895f7e9dfde0aa3615b",
					"blockSignature": "611bf0a54880dcf3b3f05b6dfc20df4938213548ef8839216b6ce49138dadcc043ee3f8f911c4882052f3230f001cad1bd0be50ed73960b7006107508b7f5d01",
					"height": 4
				}
			],
			"accounts": [
				[
					{
						"address": "12451387766827060593L",
						"publicKey": "0b3dc5a506e312bac462afc4fb34cdc3b19d1976a279930d15ae3c3516edd188",
						"balance": "9999994990000000",
						"secondSignature": 0,
						"isDelegate": 0,
						"vote": "0",
						"multimin": 0,
						"multilifetime": 0,
						"nameexist": 0,
						"producedBlocks": 0,
						"missedBlocks": 0,
						"fees": "0",
						"rewards": "0",
						"asset": {},
						"voteWeight": "0"
					},
					{
						"username": "genesis_100",
						"isDelegate": 1,
						"secondSignature": 0,
						"address": "4103804705971278554L",
						"publicKey": "f834a69d7f017b649859ea85f0a0c649202a8fb4619afa96daed06fa5641746b",
						"balance": "1990000000",
						"vote": "0",
						"multimin": 0,
						"multilifetime": 0,
						"nameexist": 0,
						"producedBlocks": 0,
						"missedBlocks": 0,
						"fees": "0",
						"rewards": "0",
						"asset": {},
						"voteWeight": "10000000000000000"
					},
					{
						"address": "2222471382442610527L",
						"publicKey": "caff2242b740a733daa3f3f96fc1592303b60c1704a8ac626e2704da039f41ee",
						"secondPublicKey": null,
						"username": "RadioHead",
						"isDelegate": true,
						"secondSignature": false,
						"balance": "500000000",
						"multiMin": 0,
						"multiLifetime": 0,
						"nameExist": false,
						"missedBlocks": 0,
						"producedBlocks": 0,
						"rank": 0,
						"fees": 0,
						"rewards": 0,
						"vote": 0,
						"productivity": 0
					}
				]
			]
		}
	}
}
